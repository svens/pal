#pragma once // -*- C++ -*-

/**
 * \file pal/worker
 * Simplest synchronous task executor implementation.
 */

#include <pal/__bits/lib>
#include <pal/task>


__pal_begin


/**
 * Basic synchronous task executor. All submitted tasks are run immediately in
 * caller's thread context.
 */
class worker
{
public:

	/// Execute task \a t and on completion post it to \a q.
	void submit (task &t, task::completion_queue &q) noexcept
	{
		t();
		q.post(t);
	}
};


__pal_end
